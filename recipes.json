const fs = require('fs');

const sampleTitles = {
  fr: ["Soupe", "Salade", "Gratin", "Tarte", "Riz", "Pâtes", "Sandwich", "Omelette", "Poêlée", "Curry"],
  en: ["Soup", "Salad", "Gratin", "Pie", "Rice", "Pasta", "Sandwich", "Omelet", "Stir-fry", "Curry"]
};

const sampleIngredients = {
  fr: ["carottes", "pommes de terre", "oignons", "tomates", "fromage", "œufs", "poulet", "huile d'olive", "sel", "poivre"],
  en: ["carrots", "potatoes", "onions", "tomatoes", "cheese", "eggs", "chicken", "olive oil", "salt", "pepper"]
};

const sampleInstructions = {
  fr: "Mélangez tous les ingrédients et faites cuire à feu moyen pendant 20 minutes.",
  en: "Mix all ingredients and cook over medium heat for 20 minutes."
};

const generateRecipes = (count = 1000) => {
  const recipes = [];

  for (let i = 0; i < count; i++) {
    const lang = i % 2 === 0 ? 'fr' : 'en';
    const titleBase = sampleTitles[lang][Math.floor(Math.random() * sampleTitles[lang].length)];
    const title = `${titleBase} ${Math.floor(Math.random() * 1000)}`;

    const ingredients = [];
    const source = sampleIngredients[lang];
    while (ingredients.length < 4) {
      const item = source[Math.floor(Math.random() * source.length)];
      if (!ingredients.includes(item)) ingredients.push(item);
    }

    const recipe = {
      lang,
      title,
      prep_time: `${10 + Math.floor(Math.random() * 30)} min`,
      cook_time: `${10 + Math.floor(Math.random() * 40)} min`,
      ingredients,
      instructions: sampleInstructions[lang]
    };

    recipes.push(recipe);
  }

  return recipes;
};

const recipes = generateRecipes(1000);
fs.writeFileSync('recipes.json', JSON.stringify(recipes, null, 2), 'utf-8');

console.log('✅ Fichier recipes.json généré avec 1000 recettes.');
